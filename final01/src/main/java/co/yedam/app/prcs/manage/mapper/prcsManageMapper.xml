<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="co.yedam.app.prcs.manage.mapper.PrcsManageMapper">

	<!-- 공정관리 조회 -->
	<select id="selectPrcsManageList" resultType="prcsManageVO">
		SELECT prcs_code,
			   prcs_type,
			   prcs_name,
			   semi_yn
		  FROM prcs_manage
		 ORDER BY prcs_code
	</select>
	
	
	<!-- 공정관리 등록 -->
	<insert id="insertPrcsManage" parameterType="prcsManageVO">
		<selectKey keyProperty="prcs_code" resultType="String" order="BEFORE">
			SELECT 'PRCS-' || TO_CHAR(sysdate, 'rrMMdd') || LPAD(NVL(MAX(SUBSTR(prcs_code, -3)),0) + 1, 3, '0')
			FROM prcs_dir
			WHERE SUBSTR(prcs_code, 5, 6) = TO_CHAR(sysdate, 'rrMMdd');
		</selectKey>
		INSERT INTO prcs_dir (
								prcs_code
								, prcs_type
								, prcs_name
								, prcs_semi_yn
							 )
			 VALUES (
						#{prcsCode}
						, #{prcsType}
						, #{prcsName}
						, #{prcsSemiYn}
					 )
	</insert>
	
	<!-- 공정관리 수정 -->
	<update id="updatePrcsManage">
	</update>

	

</mapper>